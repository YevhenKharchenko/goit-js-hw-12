{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport bixOctagonSvg from './img/bi_x-octagon.svg';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst formInput = document.querySelector('.form-input');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\nconst loaderAnimation = document.createElement('div');\nloaderAnimation.classList.add('loader');\n\nlet pageNumber = 1;\nconst userKey = '41829663-a3becd9e4f80ae5dbcbf223ac';\n\nconst instanceOfLightbox = new simpleLightbox('li a', {\n  captionsData: 'alt',\n  captionClass: 'img-caption',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  loadBtn.style.display = 'none';\n  pageNumber = 1;\n  gallery.innerHTML = '';\n  form.after(loaderAnimation);\n  let inputQuery = formInput.value;\n\n  try {\n    const pics = await fetchPics();\n    renderPics(pics);\n  } catch (error) {\n    loaderAnimation.remove();\n    iziToast.show({\n      message: `${error}`,\n      position: 'topRight',\n      color: '#EF4040',\n      messageColor: '#FAFAFB',\n      iconUrl: '/img/bi_x-octagon.svg',\n    });\n    formInput.value = '';\n  }\n\n  async function fetchPics() {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: `${userKey}`,\n        q: `${inputQuery}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 40,\n        page: `${pageNumber}`,\n      },\n    });\n\n    return response.data;\n  }\n\n  function renderPics({ hits }) {\n    if (!hits.length) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please, try again!',\n        position: 'topRight',\n        color: '#EF4040',\n        messageColor: '#FAFAFB',\n        iconUrl: bixOctagonSvg,\n      });\n    }\n\n    if (hits.length) {\n      loadBtn.style.display = 'flex';\n      loadBtn.after(loaderAnimation);\n    }\n\n    const markup = hits\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) =>\n          `<li class=\"gallery-item\">\n              <a class=\"item-link\" href=\"${largeImageURL}\">\n                <img\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  width=\"360\"\n                  height=\"200\"\n                />\n              </a>\n              <ul class=\"mini-list\">\n                <li class=\"mini-header\">\n                  <h3>Likes</h3>\n                  <p>${likes}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Views</h3>\n                  <p>${views}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Comments</h3>\n                  <p>${comments}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Downloads</h3>\n                  <p>${downloads}</p>\n                </li>\n              </ul>\n            </li>`\n      )\n      .join('');\n\n    loaderAnimation.remove();\n    gallery.insertAdjacentHTML('beforeend', markup);\n    formInput.value = '';\n\n    instanceOfLightbox.refresh();\n  }\n\n  loadBtn.addEventListener('click', async () => {\n    pageNumber++;\n    loadBtn.after(loaderAnimation);\n    console.log(inputQuery);\n    console.log(pageNumber);\n    try {\n      const pics = await fetchPics();\n      renderPics(pics);\n    } catch (error) {\n      loaderAnimation.remove();\n      iziToast.show({\n        message: `${error}`,\n        position: 'topRight',\n        color: '#EF4040',\n        messageColor: '#FAFAFB',\n        iconUrl: '/img/bi_x-octagon.svg',\n      });\n      formInput.value = '';\n    }\n  });\n}\n"],"names":["bixOctagonSvg","form","formInput","gallery","loadBtn","loaderAnimation","pageNumber","userKey","instanceOfLightbox","simpleLightbox","onFormSubmit","e","inputQuery","pics","fetchPics","renderPics","error","iziToast","axios","hits","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAAA,MAAeA,EAAA,kDCOTC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAU,IAAI,QAAQ,EAEtC,IAAIC,EAAa,EACjB,MAAMC,EAAU,qCAEVC,EAAqB,IAAIC,EAAe,OAAQ,CACpD,aAAc,MACd,aAAc,cACd,aAAc,GAChB,CAAC,EAEDR,EAAK,iBAAiB,SAAUS,CAAY,EAE5C,eAAeA,EAAaC,EAAG,CAC7BA,EAAE,eAAc,EAChBP,EAAQ,MAAM,QAAU,OACxBE,EAAa,EACbH,EAAQ,UAAY,GACpBF,EAAK,MAAMI,CAAe,EAC1B,IAAIO,EAAaV,EAAU,MAE3B,GAAI,CACF,MAAMW,EAAO,MAAMC,IACnBC,EAAWF,CAAI,CAChB,OAAQG,EAAP,CACAX,EAAgB,OAAM,EACtBY,EAAS,KAAK,CACZ,QAAS,GAAGD,IACZ,SAAU,WACV,MAAO,UACP,aAAc,UACd,QAAS,uBACf,CAAK,EACDd,EAAU,MAAQ,EACnB,CAED,eAAeY,GAAY,CAazB,OAZiB,MAAMI,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,GAAGX,IACR,EAAG,GAAGK,IACN,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAM,GAAGN,GACV,CACP,CAAK,GAEe,IACjB,CAED,SAASS,EAAW,CAAE,KAAAI,GAAQ,CACvBA,EAAK,QACRF,EAAS,KAAK,CACZ,QACE,4EACF,SAAU,WACV,MAAO,UACP,aAAc,UACd,QAASjB,CACjB,CAAO,EAGCmB,EAAK,SACPf,EAAQ,MAAM,QAAU,OACxBA,EAAQ,MAAMC,CAAe,GAG/B,MAAMe,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,2CACiCL;AAAA;AAAA,yBAElBD;AAAA,yBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAQFC;AAAA;AAAA;AAAA;AAAA,uBAIAC;AAAA;AAAA;AAAA;AAAA,uBAIAC;AAAA;AAAA;AAAA;AAAA,uBAIAC;AAAA;AAAA;AAAA,kBAIhB,EACA,KAAK,EAAE,EAEVtB,EAAgB,OAAM,EACtBF,EAAQ,mBAAmB,YAAaiB,CAAM,EAC9ClB,EAAU,MAAQ,GAElBM,EAAmB,QAAO,CAC3B,CAEDJ,EAAQ,iBAAiB,QAAS,SAAY,CAC5CE,IACAF,EAAQ,MAAMC,CAAe,EAC7B,QAAQ,IAAIO,CAAU,EACtB,QAAQ,IAAIN,CAAU,EACtB,GAAI,CACF,MAAMO,EAAO,MAAMC,IACnBC,EAAWF,CAAI,CAChB,OAAQG,EAAP,CACAX,EAAgB,OAAM,EACtBY,EAAS,KAAK,CACZ,QAAS,GAAGD,IACZ,SAAU,WACV,MAAO,UACP,aAAc,UACd,QAAS,uBACjB,CAAO,EACDd,EAAU,MAAQ,EACnB,CACL,CAAG,CACH"}