{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport bixOctagonSvg from './img/bi_x-octagon.svg';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst formInput = document.querySelector('.form-input');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\nconst loaderAnimation = document.createElement('div');\nloaderAnimation.classList.add('loader');\n\nlet pageNumber = 1;\nlet limitOfPicsPerPage = 40;\nlet totalHits;\nlet inputQuery = '';\nconst userKey = '41829663-a3becd9e4f80ae5dbcbf223ac';\n\nconst instanceOfLightbox = new SimpleLightbox('li a', {\n  captionsData: 'alt',\n  captionClass: 'img-caption',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', onFormSubmit);\n\nloadBtn.addEventListener('click', onLoadBtnClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  if (!formInput.value.trim()) {\n    formInput.value = '';\n    return iziToast.warning({\n      message: 'Input field is empty. Please provide a value.',\n      position: 'topRight',\n    });\n  }\n\n  try {\n    loadBtn.style.display = 'none';\n    pageNumber = 1;\n    gallery.innerHTML = '';\n    form.after(loaderAnimation);\n    loaderAnimation.style.marginTop = '300px';\n    inputQuery = formInput.value;\n    const pics = await fetchPics();\n    renderPics(pics);\n    loaderAnimation.remove();\n  } catch (error) {\n    loaderAnimation.remove();\n    iziToast.show({\n      message: `Oops! Something went wrong. Please try again later or contact support if the issue persists. Error details: ${error.message}`,\n      position: 'topRight',\n      color: '#EF4040',\n      messageColor: '#FAFAFB',\n      iconUrl: bixOctagonSvg,\n    });\n    formInput.value = '';\n  }\n}\n\nasync function fetchPics() {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: userKey,\n      q: inputQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: limitOfPicsPerPage,\n      page: pageNumber,\n    },\n  });\n\n  totalHits = response.data.totalHits;\n\n  return response.data;\n}\n\nfunction renderPics({ hits }) {\n  if (!hits.length) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please, try again!',\n      position: 'topRight',\n      color: '#EF4040',\n      messageColor: '#FAFAFB',\n      iconUrl: bixOctagonSvg,\n    });\n  }\n\n  if (hits.length) {\n    loadBtn.style.display = 'flex';\n    loadBtn.after(loaderAnimation);\n    loaderAnimation.style.marginTop = '0';\n  }\n\n  if (hits.length < limitOfPicsPerPage && hits.length >= 1) {\n    loadBtn.style.display = 'none';\n    loaderAnimation.remove();\n    iziToast.info({\n      message: `We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n    });\n  }\n\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n              <a class=\"item-link\" href=\"${largeImageURL}\">\n                <img\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  width=\"360\"\n                  height=\"200\"\n                />\n              </a>\n              <ul class=\"mini-list\">\n                <li class=\"mini-header\">\n                  <h3>Likes</h3>\n                  <p>${likes}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Views</h3>\n                  <p>${views}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Comments</h3>\n                  <p>${comments}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Downloads</h3>\n                  <p>${downloads}</p>\n                </li>\n              </ul>\n            </li>`\n    )\n    .join('');\n\n  loaderAnimation.remove();\n  gallery.insertAdjacentHTML('beforeend', markup);\n  formInput.value = '';\n  instanceOfLightbox.refresh();\n}\n\nasync function onLoadBtnClick() {\n  const totalPages = Math.floor(totalHits / limitOfPicsPerPage);\n  loadBtn.after(loaderAnimation);\n  loadBtn.style.display = 'none';\n  pageNumber++;\n\n  try {\n    const pics = await fetchPics();\n    renderPics(pics);\n    const galleryItem = document.querySelector('.gallery-item');\n    const galleryItemRect = galleryItem.getBoundingClientRect();\n    const galleryComputedStyle = getComputedStyle(gallery);\n    const galleryGapValue = parseFloat(\n      galleryComputedStyle.getPropertyValue('gap')\n    );\n\n    scrollBy({\n      top: galleryItemRect.height * 3 + galleryGapValue * 5,\n      behavior: 'smooth',\n    });\n\n    if (pageNumber > totalPages) {\n      loadBtn.style.display = 'none';\n      loaderAnimation.remove();\n\n      return iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    loaderAnimation.remove();\n    iziToast.show({\n      message: `Oops! Something went wrong. Please try again later or contact support if the issue persists. Error details: ${error.message}`,\n      position: 'topRight',\n      color: '#EF4040',\n      messageColor: '#FAFAFB',\n      iconUrl: bixOctagonSvg,\n    });\n  }\n}\n"],"names":["bixOctagonSvg","form","formInput","gallery","loadBtn","loaderAnimation","pageNumber","limitOfPicsPerPage","totalHits","inputQuery","userKey","instanceOfLightbox","SimpleLightbox","onFormSubmit","onLoadBtnClick","e","iziToast","pics","fetchPics","renderPics","error","response","axios","hits","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","totalPages","galleryItemRect","galleryComputedStyle","galleryGapValue"],"mappings":"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"}