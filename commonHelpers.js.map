{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport bixOctagonSvg from './img/bi_x-octagon.svg';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst formInput = document.querySelector('.form-input');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\nconst loaderAnimation = document.createElement('div');\nloaderAnimation.classList.add('loader');\n\nlet pageNumber = 1;\nlet limitOfPicsPerPage = 40;\nconst totalPages = Math.ceil(500 / limitOfPicsPerPage);\nlet inputQuery = '';\nconst userKey = '41829663-a3becd9e4f80ae5dbcbf223ac';\n\nconst instanceOfLightbox = new simpleLightbox('li a', {\n  captionsData: 'alt',\n  captionClass: 'img-caption',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  loadBtn.style.display = 'none';\n  pageNumber = 1;\n  gallery.innerHTML = '';\n  form.after(loaderAnimation);\n  inputQuery = formInput.value;\n\n  try {\n    const pics = await fetchPics();\n    renderPics(pics);\n  } catch (error) {\n    loaderAnimation.remove();\n    iziToast.show({\n      message: `Oops! Something went wrong. Please try again later or contact support if the issue persists. Error details: ${error.message}`,\n      position: 'topRight',\n      color: '#EF4040',\n      messageColor: '#FAFAFB',\n      iconUrl: '/img/bi_x-octagon.svg',\n    });\n    formInput.value = '';\n  }\n\n  loadBtn.addEventListener('click', onLoadBtnClick);\n}\n\nasync function fetchPics() {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: `${userKey}`,\n      q: `${inputQuery}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: `${limitOfPicsPerPage}`,\n      page: `${pageNumber}`,\n    },\n  });\n\n  return response.data;\n}\n\nfunction renderPics({ hits }) {\n  if (!hits.length) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please, try again!',\n      position: 'topRight',\n      color: '#EF4040',\n      messageColor: '#FAFAFB',\n      iconUrl: bixOctagonSvg,\n    });\n  }\n\n  if (hits.length) {\n    loadBtn.style.display = 'flex';\n    loadBtn.after(loaderAnimation);\n    loaderAnimation.style.marginTop = '0';\n  }\n\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n              <a class=\"item-link\" href=\"${largeImageURL}\">\n                <img\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  width=\"360\"\n                  height=\"200\"\n                />\n              </a>\n              <ul class=\"mini-list\">\n                <li class=\"mini-header\">\n                  <h3>Likes</h3>\n                  <p>${likes}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Views</h3>\n                  <p>${views}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Comments</h3>\n                  <p>${comments}</p>\n                </li>\n                <li class=\"mini-header\">\n                  <h3>Downloads</h3>\n                  <p>${downloads}</p>\n                </li>\n              </ul>\n            </li>`\n    )\n    .join('');\n\n  loaderAnimation.remove();\n  gallery.insertAdjacentHTML('beforeend', markup);\n  formInput.value = '';\n\n  instanceOfLightbox.refresh();\n}\n\nasync function onLoadBtnClick() {\n  pageNumber++;\n  loadBtn.after(loaderAnimation);\n  loadBtn.style.display = 'none';\n\n  try {\n    const pics = await fetchPics();\n    renderPics(pics);\n\n    const galleryItem = document.querySelector('.gallery-item');\n    const galleryItemRect = galleryItem.getBoundingClientRect();\n    const galleryComputedStyle = getComputedStyle(gallery);\n    const galleryGapValue = parseFloat(\n      galleryComputedStyle.getPropertyValue('gap')\n    );\n\n    scrollBy({\n      top: galleryItemRect.height * 3 + galleryGapValue * 5,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    loaderAnimation.remove();\n    iziToast.show({\n      message: `Oops! Something went wrong. Please try again later or contact support if the issue persists. Error details: ${error.message}`,\n      position: 'topRight',\n      color: '#EF4040',\n      messageColor: '#FAFAFB',\n      iconUrl: '/img/bi_x-octagon.svg',\n    });\n  }\n\n  if (pageNumber > totalPages) {\n    loadBtn.style.display = 'none';\n    return iziToast.info({\n      message: `We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n    });\n  }\n}\n"],"names":["bixOctagonSvg","form","formInput","gallery","loadBtn","loaderAnimation","pageNumber","limitOfPicsPerPage","totalPages","inputQuery","userKey","instanceOfLightbox","simpleLightbox","onFormSubmit","e","pics","fetchPics","renderPics","error","iziToast","onLoadBtnClick","axios","hits","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryItemRect","galleryComputedStyle","galleryGapValue"],"mappings":"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"}